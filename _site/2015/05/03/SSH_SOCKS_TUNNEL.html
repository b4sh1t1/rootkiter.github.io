<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>SSH-Socks-Tunnel</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "http://hm.baidu.com/hm.js?7bf4580b913f88aacb1065688fea0758";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">RootKiter</a></h1>
          </div>

          <h2>SSH-Socks-Tunnel
</h2>
<!--
<audio controls=true autoplay="true">
  <source src="http://rootkiter.rootkiter.com/music/">
</audio>
-->

<p class="meta">03 May 2015</p>

<div class="post">
<h1>介绍</h1>

<p>SSH是Secure Shell的缩写，常见于linux主机远程管理中，它和telnet之间有一定的联系，区别在于它的网络传输数据是经过加密的，而telnet是明文传输的，如果被抓包程序抓到，可能导致敏感信息泄漏的问题。<br>
那么SSH和Socks之间又有什么关系呢，看过<a href="/2015/05/01/%E4%BD%BF%E7%94%A8Socks%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1.html" title="Socks代理">这篇文章</a>一定会知道 Socks服务在网络管理中有很非常多的优点，除可隐身访问目标服务器外，还可以达到一种翻墙的效果。如果能让SSH服务器快速变成一个Socks代理服务器，对我们会有很多的益处（翻墙／远程内网渗透测试）。可能SSH的开发者也思考过这个问题，于是让SSH服务天生的就支持了Socks代理的功能，看来SSH还是挺可爱的嘛。</p>

<h1>Windows客户端中部署Socks代理</h1>

<p>在windows主机上利用ssh隧道的方法有很多，我这里用到的工具为Xshell。其使用步骤如下。<br>
1.配置Xshell，并通过ssh连接远程主机（测试中的ssh服务器为一台位于美国的私人VPS），如下图示：</p>

<p><img src="/images/2015_05_03_16_36/2_1.png" alt="图1"><br>
<img src="/images/2015_05_03_16_36/2_2.png" alt="图2">  </p>

<p>2.在 文件－&gt; 属性 菜单配置 socks代理的隧道  </p>

<p><img src="/images/2015_05_03_16_36/2_3.png" alt="图3"><br>
<img src="/images/2015_05_03_16_36/2_4.png" alt="图4"><br>
<img src="/images/2015_05_03_16_36/2_5.png" alt="图5"><br>
<img src="/images/2015_05_03_16_36/2_6.png" alt="图6">  </p>

<p>此时本地的 127.0.0.1:1080 端口便有了一个刚配置好的Socks代理服务器，它将以SSH服务器为跳板来处理代理请求。<br>
有了代理服务后怎么用可参考<a href="/2015/05/01/%E4%BD%BF%E7%94%A8Socks%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1.html" title="Socks代理">这篇文章</a>。</p>

<h1>Linux 客户端中部署Socks代理</h1>

<p>由于测试环境限制，这里以Ubuntu环境为例其他的 *nux 主机方法类似：
利用 ssh 的 –D 选项可以在本地开启一个监听1080端口的 socks代理服务器。于此同时还能成功连接到远程的主机，如下图所示：</p>

<p><img src="/images/2015_05_03_16_36/2_7.png" alt="图7">  </p>

<p>代理的使用，依然可参考<a href="/2015/05/01/%E4%BD%BF%E7%94%A8Socks%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1.html" title="Socks代理">这篇文章</a>。</p>

</div>


          <div class="footer">
            <div class="contact">
              <p>
                链接 1：<br />
                链接 2：<br />
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="http://rootkiter.com/atom.xml"> RSS 源 </a><br />
                <a href="http://rootkiter.com/EarthWorm"> EarthWorm 主页</a><br />
              </p>
            </div>
          </div>
        <a href="/friend_links.html" style="float:right">友链在此，想看就看</a>
        </div>
    </body>
</html>
